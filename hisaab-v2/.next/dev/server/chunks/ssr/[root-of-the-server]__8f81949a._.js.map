{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 130, "column": 0}, "map": {"version":3,"sources":["file:///Applications/PRINCE/PROJECTS/Hisaab/hisaab-v2/lib/firebaseClient.ts"],"sourcesContent":["import { initializeApp, getApps } from \"firebase/app\";\nimport { getAuth, GoogleAuthProvider } from \"firebase/auth\";\n\nconst firebaseConfig = {\n  apiKey: process.env.NEXT_PUBLIC_FIREBASE_API_KEY,\n  authDomain: process.env.NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN,\n  projectId: process.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID,\n  storageBucket: \"hisaab-244f8.firebasestorage.app\",\n  messagingSenderId: \"231179039088\",\n  appId: process.env.NEXT_PUBLIC_FIREBASE_APP_ID,\n  measurementId: \"G-PV4GKW70CN\"\n};\n\n// Initialize only if not already initialized\nconst app = getApps().length === 0 ? initializeApp(firebaseConfig) : getApps()[0];\nconst auth = getAuth(app);\nconst googleProvider = new GoogleAuthProvider();\n\nexport { auth, googleProvider };\n"],"names":[],"mappings":";;;;;;AAAA;AAAA;AACA;AAAA;;;AAEA,MAAM,iBAAiB;IACrB,MAAM;IACN,UAAU;IACV,SAAS;IACT,eAAe;IACf,mBAAmB;IACnB,KAAK;IACL,eAAe;AACjB;AAEA,6CAA6C;AAC7C,MAAM,MAAM,IAAA,+LAAO,IAAG,MAAM,KAAK,IAAI,IAAA,qMAAa,EAAC,kBAAkB,IAAA,+LAAO,GAAE,CAAC,EAAE;AACjF,MAAM,OAAO,IAAA,6LAAO,EAAC;AACrB,MAAM,iBAAiB,IAAI,wMAAkB"}},
    {"offset": {"line": 178, "column": 0}, "map": {"version":3,"sources":["file:///Applications/PRINCE/PROJECTS/Hisaab/hisaab-v2/components/AuthContext.tsx"],"sourcesContent":["'use client';\n\nimport { createContext, useContext, useEffect, useState } from 'react';\nimport { onAuthStateChanged, signInWithPopup, signOut, User } from 'firebase/auth';\nimport { auth, googleProvider } from '../lib/firebaseClient';\nimport { useRouter } from 'next/navigation';\n\ninterface AuthContextType {\n  user: User | null;\n  loading: boolean;\n  signInWithGoogle: () => Promise<void>;\n  logout: () => Promise<void>;\n}\n\nconst AuthContext = createContext<AuthContextType>({} as AuthContextType);\n\nexport function AuthProvider({ children }: { children: React.ReactNode }) {\n  const [user, setUser] = useState<User | null>(null);\n  const [loading, setLoading] = useState(true);\n  const router = useRouter();\n\n  useEffect(() => {\n    const unsubscribe = onAuthStateChanged(auth, async (firebaseUser) => {\n      setUser(firebaseUser);\n      setLoading(false);\n\n      if (firebaseUser) {\n        // Sync with backend\n        try {\n          const token = await firebaseUser.getIdToken();\n          await fetch('/api/auth/login', {\n            method: 'POST',\n            headers: {\n              'Authorization': `Bearer ${token}`\n            }\n          });\n        } catch (e) {\n          console.error(\"Failed to sync user\", e);\n        }\n      }\n    });\n\n    return () => unsubscribe();\n  }, []);\n\n  const signInWithGoogle = async () => {\n    try {\n      await signInWithPopup(auth, googleProvider);\n      router.push('/dashboard');\n    } catch (error) {\n      console.error(\"Login failed\", error);\n    }\n  };\n\n  const logout = async () => {\n    await signOut(auth);\n    router.push('/');\n  };\n\n  return (\n    <AuthContext.Provider value={{ user, loading, signInWithGoogle, logout }}>\n      {children}\n    </AuthContext.Provider>\n  );\n}\n\nexport const useAuth = () => useContext(AuthContext);\n"],"names":[],"mappings":";;;;;;;AAEA;AACA;AAAA;AACA;AACA;AALA;;;;;;AAcA,MAAM,4BAAc,IAAA,sOAAa,EAAkB,CAAC;AAE7C,SAAS,aAAa,EAAE,QAAQ,EAAiC;IACtE,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,iOAAQ,EAAc;IAC9C,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iOAAQ,EAAC;IACvC,MAAM,SAAS,IAAA,+JAAS;IAExB,IAAA,kOAAS,EAAC;QACR,MAAM,cAAc,IAAA,wMAAkB,EAAC,6IAAI,EAAE,OAAO;YAClD,QAAQ;YACR,WAAW;YAEX,IAAI,cAAc;gBAChB,oBAAoB;gBACpB,IAAI;oBACF,MAAM,QAAQ,MAAM,aAAa,UAAU;oBAC3C,MAAM,MAAM,mBAAmB;wBAC7B,QAAQ;wBACR,SAAS;4BACP,iBAAiB,CAAC,OAAO,EAAE,OAAO;wBACpC;oBACF;gBACF,EAAE,OAAO,GAAG;oBACV,QAAQ,KAAK,CAAC,uBAAuB;gBACvC;YACF;QACF;QAEA,OAAO,IAAM;IACf,GAAG,EAAE;IAEL,MAAM,mBAAmB;QACvB,IAAI;YACF,MAAM,IAAA,qMAAe,EAAC,6IAAI,EAAE,uJAAc;YAC1C,OAAO,IAAI,CAAC;QACd,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,gBAAgB;QAChC;IACF;IAEA,MAAM,SAAS;QACb,MAAM,IAAA,6LAAO,EAAC,6IAAI;QAClB,OAAO,IAAI,CAAC;IACd;IAEA,qBACE,8PAAC,YAAY,QAAQ;QAAC,OAAO;YAAE;YAAM;YAAS;YAAkB;QAAO;kBACpE;;;;;;AAGP;AAEO,MAAM,UAAU,IAAM,IAAA,mOAAU,EAAC"}}]
}