{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 130, "column": 0}, "map": {"version":3,"sources":["file:///Applications/PRINCE/PROJECTS/Hisaab/hisaab-v2/lib/firebaseClient.ts"],"sourcesContent":["import { initializeApp, getApps } from \"firebase/app\";\nimport { getAuth, GoogleAuthProvider } from \"firebase/auth\";\n\nconst firebaseConfig = {\n  apiKey: process.env.NEXT_PUBLIC_FIREBASE_API_KEY,\n  authDomain: process.env.NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN,\n  projectId: process.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID,\n  storageBucket: \"hisaab-244f8.firebasestorage.app\",\n  messagingSenderId: \"231179039088\",\n  appId: process.env.NEXT_PUBLIC_FIREBASE_APP_ID,\n  measurementId: \"G-PV4GKW70CN\"\n};\n\n// Initialize only if not already initialized\nconst app = getApps().length === 0 ? initializeApp(firebaseConfig) : getApps()[0];\nconst auth = getAuth(app);\nconst googleProvider = new GoogleAuthProvider();\n\nexport { auth, googleProvider };\n"],"names":[],"mappings":";;;;;;AAAA;AAAA;AACA;AAAA;;;AAEA,MAAM,iBAAiB;IACrB,MAAM;IACN,UAAU;IACV,SAAS;IACT,eAAe;IACf,mBAAmB;IACnB,KAAK;IACL,eAAe;AACjB;AAEA,6CAA6C;AAC7C,MAAM,MAAM,IAAA,+LAAO,IAAG,MAAM,KAAK,IAAI,IAAA,qMAAa,EAAC,kBAAkB,IAAA,+LAAO,GAAE,CAAC,EAAE;AACjF,MAAM,OAAO,IAAA,6LAAO,EAAC;AACrB,MAAM,iBAAiB,IAAI,wMAAkB"}},
    {"offset": {"line": 178, "column": 0}, "map": {"version":3,"sources":["file:///Applications/PRINCE/PROJECTS/Hisaab/hisaab-v2/components/AuthContext.tsx"],"sourcesContent":["'use client';\n\nimport { createContext, useContext, useEffect, useState } from 'react';\nimport { onAuthStateChanged, signInWithPopup, signOut, User } from 'firebase/auth';\nimport { auth, googleProvider } from '../lib/firebaseClient';\nimport { useRouter } from 'next/navigation';\n\ninterface AuthContextType {\n  user: User | null;\n  loading: boolean;\n  signInWithGoogle: () => Promise<void>;\n  signOut: () => Promise<void>;\n  getIdToken: () => Promise<string>;\n}\n\nconst AuthContext = createContext<AuthContextType>({} as AuthContextType);\n\nexport function AuthProvider({ children }: { children: React.ReactNode }) {\n  const [user, setUser] = useState<User | null>(null);\n  const [loading, setLoading] = useState(true);\n  const router = useRouter();\n\n  useEffect(() => {\n    const unsubscribe = onAuthStateChanged(auth, async (firebaseUser) => {\n      setUser(firebaseUser);\n      setLoading(false);\n\n      if (firebaseUser) {\n        // Sync with backend\n        try {\n          const token = await firebaseUser.getIdToken();\n          const res = await fetch('/api/auth/login', {\n            method: 'POST',\n            headers: {\n              'Authorization': `Bearer ${token}`\n            }\n          });\n          const data = await res.json();\n          // Handling redirects based on response\n          if (data.isNewUser) {\n             router.push('/register');\n          } else if (window.location.pathname === '/login' || window.location.pathname === '/') {\n             // Only redirect to dashboard if currently on public pages\n             // Avoid redirecting if user is on specific page already \n             router.push('/dashboard');\n          }\n        } catch (e) {\n          console.error(\"Failed to sync user\", e);\n        }\n      }\n    });\n\n    return () => unsubscribe();\n  }, []);\n\n  const signInWithGoogle = async () => {\n    try {\n      await signInWithPopup(auth, googleProvider);\n      // Logic handled in onAuthStateChanged\n    } catch (error) {\n      console.error(\"Login failed\", error);\n    }\n  };\n\n  const signOutUser = async () => {\n    await signOut(auth);\n    router.push('/');\n  };\n\n  const getIdToken = async () => {\n    if (!user) throw new Error(\"No user logged in\");\n    return user.getIdToken();\n  };\n\n  return (\n    <AuthContext.Provider value={{ user, loading, signInWithGoogle, signOut: signOutUser, getIdToken }}>\n      {children}\n    </AuthContext.Provider>\n  );\n}\n\nexport const useAuth = () => useContext(AuthContext);\n"],"names":[],"mappings":";;;;;;;AAEA;AACA;AAAA;AACA;AACA;AALA;;;;;;AAeA,MAAM,4BAAc,IAAA,sOAAa,EAAkB,CAAC;AAE7C,SAAS,aAAa,EAAE,QAAQ,EAAiC;IACtE,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,iOAAQ,EAAc;IAC9C,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iOAAQ,EAAC;IACvC,MAAM,SAAS,IAAA,+JAAS;IAExB,IAAA,kOAAS,EAAC;QACR,MAAM,cAAc,IAAA,wMAAkB,EAAC,6IAAI,EAAE,OAAO;YAClD,QAAQ;YACR,WAAW;YAEX,IAAI,cAAc;gBAChB,oBAAoB;gBACpB,IAAI;oBACF,MAAM,QAAQ,MAAM,aAAa,UAAU;oBAC3C,MAAM,MAAM,MAAM,MAAM,mBAAmB;wBACzC,QAAQ;wBACR,SAAS;4BACP,iBAAiB,CAAC,OAAO,EAAE,OAAO;wBACpC;oBACF;oBACA,MAAM,OAAO,MAAM,IAAI,IAAI;oBAC3B,uCAAuC;oBACvC,IAAI,KAAK,SAAS,EAAE;wBACjB,OAAO,IAAI,CAAC;oBACf,OAAO,IAAI,OAAO,QAAQ,CAAC,QAAQ,KAAK,YAAY,OAAO,QAAQ,CAAC,QAAQ,KAAK,KAAK;wBACnF,0DAA0D;wBAC1D,yDAAyD;wBACzD,OAAO,IAAI,CAAC;oBACf;gBACF,EAAE,OAAO,GAAG;oBACV,QAAQ,KAAK,CAAC,uBAAuB;gBACvC;YACF;QACF;QAEA,OAAO,IAAM;IACf,GAAG,EAAE;IAEL,MAAM,mBAAmB;QACvB,IAAI;YACF,MAAM,IAAA,qMAAe,EAAC,6IAAI,EAAE,uJAAc;QAC1C,sCAAsC;QACxC,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,gBAAgB;QAChC;IACF;IAEA,MAAM,cAAc;QAClB,MAAM,IAAA,6LAAO,EAAC,6IAAI;QAClB,OAAO,IAAI,CAAC;IACd;IAEA,MAAM,aAAa;QACjB,IAAI,CAAC,MAAM,MAAM,IAAI,MAAM;QAC3B,OAAO,KAAK,UAAU;IACxB;IAEA,qBACE,8PAAC,YAAY,QAAQ;QAAC,OAAO;YAAE;YAAM;YAAS;YAAkB,SAAS;YAAa;QAAW;kBAC9F;;;;;;AAGP;AAEO,MAAM,UAAU,IAAM,IAAA,mOAAU,EAAC"}},
    {"offset": {"line": 267, "column": 0}, "map": {"version":3,"sources":["file:///Applications/PRINCE/PROJECTS/Hisaab/hisaab-v2/components/InstallPrompt.tsx"],"sourcesContent":["'use client';\nimport { useState, useEffect } from 'react';\nimport { Download, X, CheckCircle, MonitorDown } from 'lucide-react';\nimport { motion, AnimatePresence } from 'framer-motion';\n\nexport default function InstallPrompt() {\n  const [deferredPrompt, setDeferredPrompt] = useState<any>(null);\n  const [isVisible, setIsVisible] = useState(false);\n\n  useEffect(() => {\n    const handler = (e: any) => {\n      e.preventDefault();\n      setDeferredPrompt(e);\n      setTimeout(() => setIsVisible(true), 2000);\n    };\n\n    window.addEventListener('beforeinstallprompt', handler);\n\n    // Development testing fallback: Un-comment to see the UI immediately in dev\n    //  setTimeout(() => setIsVisible(true), 1000);\n\n    return () => window.removeEventListener('beforeinstallprompt', handler);\n  }, []);\n\n  const handleInstall = async () => {\n    if (!deferredPrompt) return;\n    deferredPrompt.prompt();\n    const { outcome } = await deferredPrompt.userChoice;\n    if (outcome === 'accepted') {\n      setDeferredPrompt(null);\n      setIsVisible(false);\n    }\n  };\n\n  const handleDismiss = () => {\n    setIsVisible(false);\n  };\n\n  return (\n    <AnimatePresence>\n      {isVisible && (\n        <motion.div \n          initial={{ y: 50, opacity: 0 }}\n          animate={{ y: 0, opacity: 1 }}\n          exit={{ y: 50, opacity: 0 }}\n          transition={{ type: \"spring\", stiffness: 300, damping: 30 }}\n          className=\"fixed bottom-6 right-6 z-[100] max-w-sm w-full\"\n        >\n          <div className=\"bg-white p-6 rounded-2xl shadow-xl border border-slate-100 relative\">\n            \n            {/* Close Button */}\n            <button \n              onClick={handleDismiss}\n              className=\"absolute top-4 right-4 text-slate-400 hover:text-slate-600 transition-colors\"\n            >\n              <X size={20} />\n            </button>\n            \n            <div className=\"flex gap-4\">\n              {/* Icon Box */}\n              <div className=\"flex-shrink-0\">\n                <div className=\"w-12 h-12 rounded-xl bg-blue-50 flex items-center justify-center text-[#2b8cee]\">\n                  <MonitorDown size={24} strokeWidth={2} />\n                </div>\n              </div>\n\n              {/* Text Content */}\n              <div className=\"flex-1 pr-6\">\n                <h3 className=\"text-lg font-bold text-slate-900 leading-tight mb-2\">Install Hisab for Desktop</h3>\n                <p className=\"text-sm text-slate-500 leading-relaxed mb-4\">\n                  Experience faster load times and access your shared expenses even when you're offline.\n                </p>\n\n                {/* Features */}\n                <div className=\"flex items-center gap-4 mb-6\">\n                    <div className=\"flex items-center gap-1.5\">\n                      <CheckCircle size={16} className=\"text-green-500 fill-green-500 text-white\" />\n                      <span className=\"text-sm font-medium text-slate-600\">Instant Access</span>\n                    </div>\n                    <div className=\"flex items-center gap-1.5\">\n                      <CheckCircle size={16} className=\"text-green-500 fill-green-500 text-white\" />\n                      <span className=\"text-sm font-medium text-slate-600\">Offline Mode</span>\n                    </div>\n                </div>\n                \n                {/* Actions */}\n                <div className=\"flex items-center gap-4\">\n                  <button \n                    onClick={handleInstall}\n                    className=\"bg-[#2b8cee] hover:bg-[#1a6bb5] text-white px-6 py-2.5 rounded-lg font-bold text-sm shadow-md shadow-blue-500/20 active:scale-95 transition-all flex items-center justify-center gap-2\"\n                  >\n                    <Download size={18} />\n                    Install App\n                  </button>\n                  <button \n                    onClick={handleDismiss}\n                    className=\"text-slate-500 hover:text-slate-700 font-semibold text-sm transition-colors\"\n                  >\n                    Not Now\n                  </button>\n                </div>\n\n              </div>\n            </div>\n          </div>\n        </motion.div>\n      )}\n    </AnimatePresence>\n  );\n}\n"],"names":[],"mappings":";;;;;AACA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAHA;;;;;AAKe,SAAS;IACtB,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,IAAA,iOAAQ,EAAM;IAC1D,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,iOAAQ,EAAC;IAE3C,IAAA,kOAAS,EAAC;QACR,MAAM,UAAU,CAAC;YACf,EAAE,cAAc;YAChB,kBAAkB;YAClB,WAAW,IAAM,aAAa,OAAO;QACvC;QAEA,OAAO,gBAAgB,CAAC,uBAAuB;QAE/C,4EAA4E;QAC5E,+CAA+C;QAE/C,OAAO,IAAM,OAAO,mBAAmB,CAAC,uBAAuB;IACjE,GAAG,EAAE;IAEL,MAAM,gBAAgB;QACpB,IAAI,CAAC,gBAAgB;QACrB,eAAe,MAAM;QACrB,MAAM,EAAE,OAAO,EAAE,GAAG,MAAM,eAAe,UAAU;QACnD,IAAI,YAAY,YAAY;YAC1B,kBAAkB;YAClB,aAAa;QACf;IACF;IAEA,MAAM,gBAAgB;QACpB,aAAa;IACf;IAEA,qBACE,8PAAC,4NAAe;kBACb,2BACC,8PAAC,oNAAM,CAAC,GAAG;YACT,SAAS;gBAAE,GAAG;gBAAI,SAAS;YAAE;YAC7B,SAAS;gBAAE,GAAG;gBAAG,SAAS;YAAE;YAC5B,MAAM;gBAAE,GAAG;gBAAI,SAAS;YAAE;YAC1B,YAAY;gBAAE,MAAM;gBAAU,WAAW;gBAAK,SAAS;YAAG;YAC1D,WAAU;sBAEV,cAAA,8PAAC;gBAAI,WAAU;;kCAGb,8PAAC;wBACC,SAAS;wBACT,WAAU;kCAEV,cAAA,8PAAC,iNAAC;4BAAC,MAAM;;;;;;;;;;;kCAGX,8PAAC;wBAAI,WAAU;;0CAEb,8PAAC;gCAAI,WAAU;0CACb,cAAA,8PAAC;oCAAI,WAAU;8CACb,cAAA,8PAAC,mPAAW;wCAAC,MAAM;wCAAI,aAAa;;;;;;;;;;;;;;;;0CAKxC,8PAAC;gCAAI,WAAU;;kDACb,8PAAC;wCAAG,WAAU;kDAAsD;;;;;;kDACpE,8PAAC;wCAAE,WAAU;kDAA8C;;;;;;kDAK3D,8PAAC;wCAAI,WAAU;;0DACX,8PAAC;gDAAI,WAAU;;kEACb,8PAAC,mPAAW;wDAAC,MAAM;wDAAI,WAAU;;;;;;kEACjC,8PAAC;wDAAK,WAAU;kEAAqC;;;;;;;;;;;;0DAEvD,8PAAC;gDAAI,WAAU;;kEACb,8PAAC,mPAAW;wDAAC,MAAM;wDAAI,WAAU;;;;;;kEACjC,8PAAC;wDAAK,WAAU;kEAAqC;;;;;;;;;;;;;;;;;;kDAK3D,8PAAC;wCAAI,WAAU;;0DACb,8PAAC;gDACC,SAAS;gDACT,WAAU;;kEAEV,8PAAC,sOAAQ;wDAAC,MAAM;;;;;;oDAAM;;;;;;;0DAGxB,8PAAC;gDACC,SAAS;gDACT,WAAU;0DACX;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAYnB"}},
    {"offset": {"line": 520, "column": 0}, "map": {"version":3,"sources":["file:///Applications/PRINCE/PROJECTS/Hisaab/hisaab-v2/components/ServiceWorkerRegister.tsx"],"sourcesContent":["'use client';\nimport { useEffect } from 'react';\n\nexport default function ServiceWorkerRegister() {\n  useEffect(() => {\n    if ('serviceWorker' in navigator && typeof window !== 'undefined') {\n      window.addEventListener('load', function() {\n        navigator.serviceWorker.register('/sw.js').then(\n          function(registration) {\n            console.log('Service Worker registration successful with scope: ', registration.scope);\n          },\n          function(err) {\n            console.log('Service Worker registration failed: ', err);\n          }\n        );\n      });\n    }\n  }, []);\n\n  return null;\n}\n"],"names":[],"mappings":";;;;AACA;AADA;;AAGe,SAAS;IACtB,IAAA,kOAAS,EAAC;QACR,IAAI,mBAAmB,aAAa,kDAAkB;;IAYxD,GAAG,EAAE;IAEL,OAAO;AACT"}}]
}