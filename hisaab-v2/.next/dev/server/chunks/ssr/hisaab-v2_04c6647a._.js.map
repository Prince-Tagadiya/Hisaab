{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Applications/PRINCE/PROJECTS/Hisaab/hisaab-v2/components/Sidebar.tsx"],"sourcesContent":["'use client';\nimport React from 'react';\nimport Link from 'next/link';\nimport { usePathname } from 'next/navigation';\nimport { LayoutDashboard, UserCircle, Plus, ArrowUpRight, Users, UserPlus, LogOut, Bell } from 'lucide-react';\n\nexport default function Sidebar({ \n  onLogout, \n  onCreateGroup, \n  onJoinGroup, \n  onAddFriend,\n  mobileOpen,\n  setMobileOpen\n}: any) {\n  const pathname = usePathname();\n  const isActive = (path: string) => pathname === path;\n\n  // @ts-ignore\n  const NavItem = ({ to, icon: Icon, label, badge }) => {\n    const active = isActive(to);\n    return (\n      <Link \n        href={to} \n        onClick={() => setMobileOpen && setMobileOpen(false)}\n        className={`w-full flex items-center gap-3 px-4 py-3 rounded-xl font-semibold transition-all duration-200 ${\n          active \n            ? 'bg-[#2b8cee]/10 text-[#2b8cee]' \n            : 'text-slate-500 hover:bg-slate-50 hover:text-slate-900'\n        }`}\n      >\n        <Icon size={20} />\n        <span className=\"flex-1\">{label}</span>\n        {badge > 0 && (\n          <span className=\"bg-[#2b8cee] text-white text-[10px] font-bold px-1.5 py-0.5 rounded-full\">\n            {badge}\n          </span>\n        )}\n      </Link>\n    );\n  };\n\n  // @ts-ignore\n  const ActionItem = ({ onClick, icon: Icon, label }) => (\n    <button \n      type=\"button\"\n      onClick={() => {\n        if (onClick) onClick();\n        if (setMobileOpen) setMobileOpen(false);\n      }}\n      className=\"w-full flex items-center gap-3 px-4 py-3 rounded-xl font-semibold text-slate-500 hover:bg-slate-50 hover:text-slate-900 transition-all duration-200\"\n    >\n      <Icon size={20} />\n      <span>{label}</span>\n    </button>\n  );\n\n  return (\n    <div className=\"flex flex-col h-full bg-white dark:bg-[#1a2632] dark:border-r dark:border-gray-800\">\n      <div className=\"p-6 flex items-center gap-3 border-b border-transparent lg:border-none\">\n        <div className=\"size-10 flex items-center justify-center\">\n          <img src=\"/icons/icon-192.png\" alt=\"Logo\" className=\"w-full h-full object-contain rounded-xl\" />\n        </div>\n        <span className=\"text-xl font-bold text-slate-900 dark:text-white tracking-tight\">Hisaab</span>\n      </div>\n\n      <nav className=\"flex-1 px-4 space-y-2 overflow-y-auto py-4\">\n        <NavItem to=\"/dashboard\" icon={LayoutDashboard} label=\"Dashboard\" badge={0} />\n        <NavItem to=\"/groups\" icon={Users} label=\"My Groups\" badge={0} />\n        <NavItem to=\"/requests\" icon={Bell} label=\"Requests\" badge={0} />\n        <NavItem to=\"/profile\" icon={UserCircle} label=\"Profile\" badge={0} />\n\n        <div className=\"pt-4 pb-2 px-4\">\n            <p className=\"text-xs font-bold text-slate-400 uppercase tracking-wider\">Quick Actions</p>\n        </div>\n\n        <ActionItem onClick={onCreateGroup} icon={Plus} label=\"New Group\" />\n        <ActionItem onClick={onJoinGroup} icon={ArrowUpRight} label=\"Join Group\" />\n        <ActionItem onClick={onAddFriend} icon={UserPlus} label=\"Add Friend\" />\n      </nav>\n\n      <div className=\"p-4 border-t border-slate-100 dark:border-gray-800\">\n        <button \n          type=\"button\"\n          onClick={onLogout} \n          className=\"w-full flex items-center gap-3 px-4 py-3 rounded-xl font-semibold text-red-500 hover:bg-red-50 dark:hover:bg-red-900/10 transition-all duration-200\"\n        >\n          <LogOut size={20} />\n          <span>Sign Out</span>\n        </button>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAJA;;;;;AAMe,SAAS,QAAQ,EAC9B,QAAQ,EACR,aAAa,EACb,WAAW,EACX,WAAW,EACX,UAAU,EACV,aAAa,EACT;IACJ,MAAM,WAAW,IAAA,iKAAW;IAC5B,MAAM,WAAW,CAAC,OAAiB,aAAa;IAEhD,aAAa;IACb,MAAM,UAAU,CAAC,EAAE,EAAE,EAAE,MAAM,IAAI,EAAE,KAAK,EAAE,KAAK,EAAE;QAC/C,MAAM,SAAS,SAAS;QACxB,qBACE,8PAAC,uLAAI;YACH,MAAM;YACN,SAAS,IAAM,iBAAiB,cAAc;YAC9C,WAAW,CAAC,8FAA8F,EACxG,SACI,mCACA,yDACJ;;8BAEF,8PAAC;oBAAK,MAAM;;;;;;8BACZ,8PAAC;oBAAK,WAAU;8BAAU;;;;;;gBACzB,QAAQ,mBACP,8PAAC;oBAAK,WAAU;8BACb;;;;;;;;;;;;IAKX;IAEA,aAAa;IACb,MAAM,aAAa,CAAC,EAAE,OAAO,EAAE,MAAM,IAAI,EAAE,KAAK,EAAE,iBAChD,8PAAC;YACC,MAAK;YACL,SAAS;gBACP,IAAI,SAAS;gBACb,IAAI,eAAe,cAAc;YACnC;YACA,WAAU;;8BAEV,8PAAC;oBAAK,MAAM;;;;;;8BACZ,8PAAC;8BAAM;;;;;;;;;;;;IAIX,qBACE,8PAAC;QAAI,WAAU;;0BACb,8PAAC;gBAAI,WAAU;;kCACb,8PAAC;wBAAI,WAAU;kCACb,cAAA,8PAAC;4BAAI,KAAI;4BAAsB,KAAI;4BAAO,WAAU;;;;;;;;;;;kCAEtD,8PAAC;wBAAK,WAAU;kCAAkE;;;;;;;;;;;;0BAGpF,8PAAC;gBAAI,WAAU;;kCACb,8PAAC;wBAAQ,IAAG;wBAAa,MAAM,+PAAe;wBAAE,OAAM;wBAAY,OAAO;;;;;;kCACzE,8PAAC;wBAAQ,IAAG;wBAAU,MAAM,6NAAK;wBAAE,OAAM;wBAAY,OAAO;;;;;;kCAC5D,8PAAC;wBAAQ,IAAG;wBAAY,MAAM,0NAAI;wBAAE,OAAM;wBAAW,OAAO;;;;;;kCAC5D,8PAAC;wBAAQ,IAAG;wBAAW,MAAM,gPAAU;wBAAE,OAAM;wBAAU,OAAO;;;;;;kCAEhE,8PAAC;wBAAI,WAAU;kCACX,cAAA,8PAAC;4BAAE,WAAU;sCAA4D;;;;;;;;;;;kCAG7E,8PAAC;wBAAW,SAAS;wBAAe,MAAM,0NAAI;wBAAE,OAAM;;;;;;kCACtD,8PAAC;wBAAW,SAAS;wBAAa,MAAM,0PAAY;wBAAE,OAAM;;;;;;kCAC5D,8PAAC;wBAAW,SAAS;wBAAa,MAAM,0OAAQ;wBAAE,OAAM;;;;;;;;;;;;0BAG1D,8PAAC;gBAAI,WAAU;0BACb,cAAA,8PAAC;oBACC,MAAK;oBACL,SAAS;oBACT,WAAU;;sCAEV,8PAAC,oOAAM;4BAAC,MAAM;;;;;;sCACd,8PAAC;sCAAK;;;;;;;;;;;;;;;;;;;;;;;AAKhB"}},
    {"offset": {"line": 264, "column": 0}, "map": {"version":3,"sources":["file:///Applications/PRINCE/PROJECTS/Hisaab/hisaab-v2/app/requests/page.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect } from 'react';\nimport { useAuth } from '../../components/AuthContext';\nimport { useRouter } from 'next/navigation';\nimport Sidebar from '../../components/Sidebar';\nimport { Check, X, Bell, UserPlus, Users } from 'lucide-react';\n\nexport default function RequestsPage() {\n  const { user, loading, getIdToken, signOut } = useAuth();\n  const router = useRouter();\n  const [requests, setRequests] = useState<any[]>([]);\n  const [isLoading, setIsLoading] = useState(true);\n  const [mobileOpen, setMobileOpen] = useState(false);\n  const [processingId, setProcessingId] = useState<string | null>(null);\n\n  useEffect(() => {\n    if (user) {\n        fetchRequests();\n    }\n  }, [user]);\n\n  const fetchRequests = async () => {\n      try {\n          const token = await getIdToken();\n          const res = await fetch('/api/requests', {\n              headers: { 'Authorization': `Bearer ${token}` }\n          });\n          const data = await res.json();\n          if (res.ok) {\n            setRequests(data.requests || []);\n          }\n      } catch (e) {\n          console.error(\"Failed to fetch requests\", e);\n      } finally {\n          setIsLoading(false);\n      }\n  };\n\n  const handleAction = async (requestId: string, action: 'accept' | 'decline') => {\n      setProcessingId(requestId);\n      try {\n        const token = await getIdToken();\n        const res = await fetch(`/api/requests/${requestId}`, {\n            method: 'PATCH',\n            headers: { \n                'Authorization': `Bearer ${token}`,\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({ action })\n        });\n        \n        if (res.ok) {\n            // Remove from list or update status\n            setRequests(prev => prev.filter(r => r._id !== requestId));\n            if (action === 'accept') {\n                // Optionally redirect to the new group\n                // But bulk accept is better UX, so just stay here.\n            }\n        }\n      } catch (e) {\n        console.error(\"Action failed\", e);\n      } finally {\n        setProcessingId(null);\n      }\n  };\n\n  if (loading) return <div>Loading...</div>;\n  if (!user) {\n      if (typeof window !== 'undefined') router.push('/');\n      return null;\n  }\n\n  return (\n    <div className=\"flex h-screen bg-[#f6f7f8] dark:bg-[#101922] text-slate-900 dark:text-white transition-colors font-sans\">\n       {/* Sidebar */}\n       <aside className={`fixed inset-y-0 left-0 z-50 w-64 bg-white dark:bg-[#1a2632] border-r border-slate-200 dark:border-slate-800 transform transition-transform duration-300 ease-in-out md:translate-x-0 md:static md:inset-auto ${mobileOpen ? 'translate-x-0' : '-translate-x-full'}`}>\n          <Sidebar \n            mobileOpen={mobileOpen} \n            setMobileOpen={setMobileOpen}\n            onLogout={signOut}\n            onCreateGroup={() => router.push('/groups/create')}\n            onJoinGroup={() => router.push('/requests')}\n            onAddFriend={() => router.push('/profile')}\n          />\n       </aside>\n\n       {/* Overlay */}\n       {mobileOpen && (\n         <div \n           className=\"fixed inset-0 bg-black/50 z-40 md:hidden\"\n           onClick={() => setMobileOpen(false)}\n         />\n       )}\n\n       <main className=\"flex-1 flex flex-col overflow-hidden w-full\">\n            {/* Header */}\n            <header className=\"sticky top-0 z-30 w-full bg-white dark:bg-[#1a2632] border-b border-slate-200 dark:border-slate-800 shadow-sm flex-none\">\n                <div className=\"px-6 lg:px-10 py-3 flex items-center justify-between\">\n                    <div className=\"flex items-center gap-4\">\n                        <button \n                            className=\"md:hidden p-2 text-slate-600 dark:text-slate-300\"\n                            onClick={() => setMobileOpen(true)}\n                        >\n                            <span className=\"material-symbols-outlined\">menu</span>\n                        </button>\n                        <h1 className=\"text-xl font-bold tracking-tight text-slate-900 dark:text-white\">Invitations</h1>\n                    </div>\n                    {/* User Profile */}\n                    <div className=\"size-10 rounded-full bg-slate-200 dark:bg-slate-700 overflow-hidden cursor-pointer border border-slate-200 dark:border-slate-600\">\n                             {user?.photoURL ? (\n                                 <img src={user.photoURL} alt=\"Profile\" className=\"w-full h-full object-cover\" />\n                             ) : (\n                                 <div className=\"w-full h-full flex items-center justify-center bg-slate-300 text-slate-500 font-bold\">\n                                     {user?.displayName?.charAt(0) || 'U'}\n                                 </div>\n                             )}\n                    </div>\n                </div>\n            </header>\n\n            {/* List */}\n             <div className=\"flex-1 overflow-y-auto px-4 md:px-10 py-8 scroll-smooth\">\n                <div className=\"max-w-[1024px] mx-auto w-full\">\n                    {requests.length === 0 && !isLoading ? (\n                        <div className=\"flex flex-col items-center justify-center py-20 text-center\">\n                            <div className=\"bg-slate-100 dark:bg-slate-800 p-6 rounded-full text-slate-400 mb-4\">\n                                <Bell size={48} />\n                            </div>\n                            <h2 className=\"text-xl font-bold text-slate-900 dark:text-white\">No pending invitations</h2>\n                            <p className=\"text-slate-500 dark:text-slate-400 mt-2\">You're all caught up!</p>\n                        </div>\n                    ) : (\n                        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                            {requests.map((req) => (\n                                <div key={req._id} className=\"relative bg-white dark:bg-[#1a2632] rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 overflow-hidden\">\n                                     {/* Banner / Background */}\n                                    <div className=\"h-28 bg-gradient-to-r from-[#2b8cee] to-purple-600 relative\">\n                                        <div className=\"absolute inset-0 bg-black/10\"></div>\n                                        <div className=\"absolute -bottom-6 left-6\">\n                                            <div className=\"size-16 rounded-xl bg-white dark:bg-[#1a2632] p-1 shadow-lg\">\n                                                <div className=\"w-full h-full rounded-lg bg-[#f0f4f8] dark:bg-slate-700 flex items-center justify-center text-[#2b8cee]\">\n                                                    <Users size={32} />\n                                                </div>\n                                            </div>\n                                        </div>\n                                    </div>\n\n                                    <div className=\"pt-10 pb-6 px-6\">\n                                        <div className=\"flex justify-between items-start mb-4\">\n                                            <div>\n                                                <h3 className=\"text-lg font-bold text-slate-900 dark:text-white\">{req.groupName}</h3>\n                                                <p className=\"text-sm text-slate-500 dark:text-slate-400 flex items-center gap-1 mt-1\">\n                                                    <UserPlus size={14} />\n                                                    Invited by <span className=\"font-medium text-slate-800 dark:text-slate-200\">{req.fromUser?.name || 'Someone'}</span>\n                                                </p>\n                                            </div>\n                                        </div>\n\n                                        <div className=\"flex gap-3 mt-4\">\n                                            <button \n                                                onClick={() => handleAction(req._id, 'accept')}\n                                                disabled={processingId === req._id}\n                                                className=\"flex-1 h-10 bg-[#2b8cee] hover:bg-blue-600 text-white font-semibold rounded-lg shadow-md transition-all flex items-center justify-center gap-2\"\n                                            >\n                                                {processingId === req._id ? '...' : (\n                                                    <>\n                                                        <Check size={18} /> Accept\n                                                    </>\n                                                )}\n                                            </button>\n                                            <button \n                                                onClick={() => handleAction(req._id, 'decline')}\n                                                disabled={processingId === req._id}\n                                                className=\"flex-1 h-10 bg-slate-100 dark:bg-slate-800 hover:bg-slate-200 dark:hover:bg-slate-700 text-slate-700 dark:text-slate-300 font-medium rounded-lg transition-all flex items-center justify-center gap-2\"\n                                            >\n                                                <X size={18} /> Decline\n                                            </button>\n                                        </div>\n                                    </div>\n                                </div>\n                            ))}\n                        </div>\n                    )}\n                </div>\n             </div>\n       </main>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}}]
}